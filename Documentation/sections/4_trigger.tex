\chapter{Trigger Implementation}

\section{Triggers}

\subsection*{CheckOrderInsertOrUpdate}
This trigger enforces logical constraints on orders:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER CheckOrderInsertOrUpdate
    % ...existing code...
END;
/
\end{lstlisting}

\subsection*{CheckCustomerType}
Enforces that "individual" customers cannot have business data and vice versa:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER CheckCustomerType
    % ...existing code...
END;
/
\end{lstlisting}

\subsection*{UpdateNumOrders}
Keeps each team's numOrder up-to-date when orders are inserted, updated, or deleted:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER UpdateNumOrders
    % ...existing code...
END;
/
\end{lstlisting}

\subsection*{CheckTeamInsertInitialization}
Initializes numOrder and performanceScore when inserting a new team:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER CheckTeamInsertInitialization
    % ...existing code...
END;
/
\end{lstlisting}

\subsection*{CheckNumEmployeeInTeam}
Ensures a team cannot exceed 8 employees:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER CheckNumEmployeeInTeam
    % ...existing code...
END;
/
\end{lstlisting}

\subsection*{ComputePerformanceScore}
Recalculates a team's average feedback score whenever a new order or feedback is added or updated:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER ComputePerformanceScore
    % ...existing code...
END;
/
\end{lstlisting}

\subsection*{AddAccount}
Automatically creates a business account for every new customer:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER AddAccount
    % ...existing code...
END;
/
\end{lstlisting}

\subsection*{DeleteTeamAfterOperationalCenter}
Deletes teams that lose their operational center reference upon an operational center's deletion:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER DeleteTeamAfterOperationalCenter
    % ...existing code...
END;
/
\end{lstlisting}

\subsection*{UpdateEmployeeAfterTeam}
Sets an employee's team reference to NULL if the team is deleted, and unassigned orders if they're not completed:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER UpdateEmployeeAfterTeam
    % ...existing code...
END;
/
\end{lstlisting}

\subsection*{DeleteAccountAfterCustomer}
Deletes business accounts that become orphaned when their customer is removed:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER DeleteAccountAfterCustomer
    % ...existing code...
END;
/
\end{lstlisting}

\subsection*{DeleteOrdersAfterTeam}
Removes orders that have lost their team and business account references:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER DeleteOrdersAfterTeam
    % ...existing code...
END;
/
\end{lstlisting}

\subsection*{DeleteOrdersAfterAccount}
Deletes orders that have lost their related business account, under certain conditions:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER DeleteOrdersAfterAccount
    % ...existing code...
END;
/
\end{lstlisting}

\subsection*{PreventOrderDeletion}
Prevents order deletion unless it has lost all references or is uncompleted with no account:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER PreventOrderDeletion
    % ...existing code...
END;
/
\end{lstlisting}

\subsection*{EmptyEmployeeListAfterTeamUpdate}
Clears the employee list if a team reference changes:
\begin{lstlisting}[language=SQL]
CREATE OR REPLACE TRIGGER EmptyEmployeeListAfterTeamUpdate
    % ...existing code...
END;
/
\end{lstlisting}
